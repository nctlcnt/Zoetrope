# Zoetrope Backend Environment Variables
# 复制此文件为 .env 并填入实际值

# ========== 服务器配置 ==========
HOST=0.0.0.0
PORT=8000
DEBUG=false

# CORS 配置 (JSON 数组格式)
CORS_ORIGINS=["*"]

# ========== TMDB API 配置 ==========
# 获取 API Key: https://www.themoviedb.org/settings/api
TMDB_API_KEY=your_tmdb_api_key_here
TMDB_BASE_URL=https://api.themoviedb.org/3
TMDB_IMAGE_BASE_URL=https://image.tmdb.org/t/p
TMDB_DEFAULT_LANGUAGE=zh-CN

# ========== AI 服务配置 ==========
# OpenAI 兼容 API (支持 OpenAI / Azure / 本地部署如 Ollama)
# OpenAI: https://platform.openai.com/api-keys
AI_API_KEY=your_openai_api_key_here
AI_API_BASE_URL=https://api.openai.com/v1
AI_MODEL=gpt-4o-mini
AI_EMBEDDING_MODEL=text-embedding-3-small

# ========== 数据库配置 ==========
# PostgreSQL 连接字符串
# 本地开发: postgresql+asyncpg://postgres:password@localhost:5432/zoetrope
# Supabase: postgresql+asyncpg://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/zoetrope

# ========== Supabase 配置 ==========
# 从 Supabase Dashboard -> Settings -> API 获取
# Project URL (格式: https://[project-ref].supabase.co)
SUPABASE_URL=https://your-project.supabase.co
# anon key (公开的，用于客户端)
SUPABASE_ANON_KEY=your_supabase_anon_key_here
# service_role key (私密的，用于服务端绕过 RLS)
SUPABASE_SERVICE_KEY=your_supabase_service_key_here

# ========== Redis 配置 ==========
# 用于缓存热度数据和会话管理
REDIS_URL=redis://localhost:6379/0
REDIS_CACHE_TTL=3600

# ========== 向量数据库配置 ==========
# 支持的 Provider: pinecone / weaviate / milvus / chroma
VECTOR_DB_PROVIDER=chroma

# Pinecone (云端向量数据库)
# 获取 API Key: https://www.pinecone.io/
PINECONE_API_KEY=your_pinecone_api_key_here
PINECONE_ENVIRONMENT=us-east-1
PINECONE_INDEX_NAME=zoetrope

# Weaviate (自托管或云端)
# 文档: https://weaviate.io/
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=your_weaviate_api_key_here

# Milvus (自托管)
# 文档: https://milvus.io/
MILVUS_HOST=localhost
MILVUS_PORT=19530

# Chroma (本地开发推荐)
# 文档: https://www.trychroma.com/
CHROMA_PERSIST_DIRECTORY=./data/chroma

# ========== 评分算法配置 ==========
# 时间衰减参数 (值越大衰减越快)
SCORE_TIME_DECAY_FACTOR=0.1
# 热度权重 (0-1)
SCORE_HOTNESS_WEIGHT=0.3
# 用户兴趣权重 (0-1)
SCORE_INTEREST_WEIGHT=0.5
# 时间紧迫性权重 (0-1)
SCORE_URGENCY_WEIGHT=0.2

# ========== Inbox 配置 ==========
# 收集箱内容保留天数
INBOX_RETENTION_DAYS=7
